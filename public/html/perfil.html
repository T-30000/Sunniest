<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Links estilos propios -->
    <link rel="icon" href="https://i.pinimg.com/564x/ab/cf/44/abcf44cea02ab6f1c4e40273a9e204d6.jpg">
    <link rel="stylesheet" href="../css/home.css">
    <link rel="stylesheet" href="../css/bt.css">
    <link rel="stylesheet" href="../css/forms.css">
    <link rel="stylesheet" href="../css/home.css">
    <link rel="stylesheet" href="../css/tablas.css">
    <link rel="stylesheet" href="../css/perfil.css">
    <!-- Link bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <title>Perfil</title>
</head>

<body>
    <nav class="navbar navbar-expand-lg navbar-light">
        <div class="container-fluid">
            <a class="navbar-brand" href="#">Sunniest</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                    <li class="nav-item"><a class="nav-link active" aria-current="page" href="./principal.html">Home</a></li>
                    <li class="nav-item"><a class="nav-link" href="./agendar.html">Agendar</a></li>
                    <li class="nav-item"><a class="nav-link" href="./citas.html">Citas</a></li>
                    <li class="nav-item"><a class="nav-link" href="./ingreso.html">Ingreso</a></li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">Perfil</a>
                        <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                            <li><a class="dropdown-item" href="./perfil.html">Ver Perfil</a></li>
                            <li><a class="dropdown-item" href="#">Mi Historial</a></li>
                            <li><hr class="dropdown-divider"></li>
                            <li><a class="dropdown-item" href="./ingreso.html">Cerrar Sesión</a></li>
                        </ul>
                    </li>
                    <li class="nav-item"><a class="nav-link" href="./profesionales.html">Profesionales</a></li>
                    <li class="nav-item"><a class="nav-link" href="./ayuda.html">Ayuda</a></li>
                </ul>
                <form class="d-flex">
                    <input class="form-control me-2 form-search" type="search" placeholder="Buscar documentos" aria-label="Search">
                    <button class="btn btn-search" type="submit">Buscar</button>
                </form>
            </div>
        </div>
    </nav>

    <div class="container">
        <div class="row">
            <div class="column profile-header seccion-perfil">
                <div class="header-profile">
                    <!-- Foto de perfil -->
                    <div class="profile-picture"><img src="https://i.pinimg.com/564x/ab/cf/44/abcf44cea02ab6f1c4e40273a9e204d6.jpg" alt=""></div>
                </div>
                <div class="header-info">
                    <h1 id="nombre">Juan Carlos Bodoque</h1>
                    <p id="descripcion">Bienvenidos a mi perfil...</p>
                    <p id="correo">correo@example.com</p>
                    <p id="telefono">+52 999123444</p>
                    <button id="btn-datos-personales">Editar</button>
                </div>
            </div>
            <div class="column personal-info seccion-perfil">
                <h2>Nombre Real</h2>
                <p id="curp">ABCD123456HDFABC01</p>
                <p id="numero">1234567890</p>
                <p id="correo-detalle">correo@example.com</p>
                <p id="estado">Estado</p>
                <p id="ciudad">Ciudad</p>
                <p id="direccion">Dirección</p>
            </div>
        </div>
        <div class="row">
            <div class="column citas seccion-perfil">
                <h2>Historial de citas</h2>
                <ul>
                    <li>Depresión - 26-Junio-2004</li>
                    <li>Depresión - 26-Junio-2004</li>
                    <li>Depresión - 26-Junio-2004</li>
                    <li>Depresión - 26-Junio-2004</li>
                    <li>Depresión - 26-Junio-2004</li>
                </ul>
            </div>
            <div class="column puntuaciones seccion-perfil">
                <h2>Puntuaciones recientes</h2>
                <ul>
                    <li>
                        <p>Juan Carlos Bodoque</p>
                        <p>Fue educado y me permitió ayudar de óptima forma</p>
                        <p>★★★★★</p>
                    </li>
                    <li>
                        <p>Juan Carlos Bodoque</p>
                        <p>Fue educado y me permitió ayudar de óptima forma</p>
                        <p>★★★★★</p>
                    </li>
                    <li>
                        <p>Juan Carlos Bodoque</p>
                        <p>Fue educado y me permitió ayudar de óptima forma</p>
                        <p>★★★★★</p>
                    </li>
                </ul>
            </div>
        </div>
        <div class="tutor seccion-perfil">
            <h2>Zona de tutor</h2>
            <p id="motivo-tutor">Porque quiero seguimiento psicológico de ell@s</p>
            <div class="tutor-info">
                <div class="tutor-info-section">
                    <p>Nombre de menor</p>
                    <p>Fecha del menor</p>
                    <p>Problema del menor</p>
                    <p>Busca ayuda del menor</p>
                </div>
                <div class="tutor-info-section">
                    <p>Nombre de menor</p>
                    <p>Fecha del menor</p>
                    <p>Problema del menor</p>
                    <p>Busca ayuda del menor</p>
                </div>
            </div>
        </div>
        <div class="profesionales seccion-perfil">
            <h2>Zona de profesionales</h2>
            <p id="motivo-profesionales">Porque quiero ayudar a las personas</p>
            <div class="profesionales-info">
                <div class="profesionales-info section">
                    <h3>Área profesional</h3>
                    <p id="area-general">Información general</p>
                </div>
                <div class="profesionales-info section">
                    <h3>Sub área profesional</h3>
                    <p id="sub-area-general">Información general</p>
                </div>
                <div class="profesionales-info section">
                    <h3>Especialidad profesional</h3>
                    <p id="especialidad-general">Información general</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts propios -->
    <script>
        // Función para hacer una petición GET al servidor y manejar la respuesta
        async function fetchData(url) {
            try {
                const response = await fetch(url);
                if (!response.ok) {
                    throw new Error('Network response was not ok');
                }
                const data = await response.json();
                return data;
            } catch (error) {
                console.error('Error fetching data:', error);
            }
        }
    
        // Función para llenar los datos del perfil
        async function fillProfileData() {
            try {
                const response = await fetchData('/api/perfil'); // Cambia la ruta según tu configuración
                if (response) {
                    // Llenar la foto de perfil
                    document.querySelector('.profile-picture img').src = `data:image/jpeg;base64,${response.foto_user}`;
                    // Llenar nombre y descripción
                    document.getElementById('nombre').textContent = `${response.nombre_user} ${response.apellido_user}`;
                    document.getElementById('descripcion').textContent = response.descripcion;
                    // Llenar correo y teléfono
                    document.getElementById('correo').textContent = response.correo_user;
                    document.getElementById('telefono').textContent = response.telefono_user;
    
                    // Mostrar información específica para tutor, profesional o general
                    if (response.tipo_usuario === 'tutor') {
                        // Mostrar información y secciones específicas para tutor
                        document.querySelector('.tutor').style.display = 'block';
                        document.getElementById('motivo-tutor').textContent = response.motivo_tutor;
                        // Llenar más información de tutoría si es necesario
                    } else if (response.tipo_usuario === 'profesional') {
                        // Mostrar información y secciones específicas para profesional
                        document.querySelector('.profesionales').style.display = 'block';
                        document.getElementById('motivo-profesionales').textContent = response.motivo_profesionales;
                        // Llenar más información de profesional si es necesario
                    }
                }
            } catch (error) {
                console.error('Error filling profile data:', error);
            }
        }
    
        // Ejecutar la función para llenar los datos del perfil al cargar la página
        window.addEventListener('load', fillProfileData);
    </script>
    

    <!-- Scripts boostrap -->
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"
        integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous">
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js"
        integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF" crossorigin="anonymous">
    </script>
    <!-- Scripts boostrap -->
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js" integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF" crossorigin="anonymous"> </script>
</body>

</html>